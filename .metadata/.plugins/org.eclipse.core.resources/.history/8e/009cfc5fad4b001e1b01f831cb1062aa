<%@page import="com.shopping.model.bean.Member"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
	
<%
	// appName : ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„(í”„ë¡œì íŠ¸ ì´ë¦„_Student)
	String appName = request.getContextPath();
	// in FrontController.java file	
	String mappingName = "/Shopping"; 
	
	// form íƒœê·¸ì—ì„œ ì‚¬ìš©í•  ë³€ìˆ˜
	String withFormTag = appName + mappingName;
	
	// form íƒœê·¸ê°€ ì•„ë‹Œ ì˜ì—­ì—ì„œ ì‚¬ìš©í•  ë³€ìˆ˜ <a>
	String notWithFormTag = appName + mappingName +"?command=";
	
	/* out.print("í”„ë¡œì íŠ¸ ì´ë¦„ : " + appName + "<br/>") ;
	out.print("mappingName:" + mappingName +"<br/>");	
	out.print("withFormTag:" + withFormTag +"<br/>");
	out.print("notWithFormTag:" + notWithFormTag +"<br/>"); */
%>	

<%@page import="java.util.*"%>

<%-- jstlì„ ìœ„í•œ íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ ì–¸ --%> 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<%-- include file="bootstrap5.jsp" --%>
<%
	// ì´ ì½”ë“œë“¤ì€ ì°¨í›„ ì‚­ì œ ì˜ˆì •
	/*Member mem = new Member() ;
	mem.setId("hong") ; // admin  hong 
	mem.setName("í™ê¸¸ë™") ; // ê´€ë¦¬ì  í™ê¸¸ë™
	session.setAttribute("loginfo", mem);
	session.setAttribute("loginfo", null); // ë¯¸ë¡œê·¸ì¸
	
	// ê²½ê³ ì„± Alert Box
	session.setAttribute("alertMessage", "ì•„ì´ë””/ë¹„ë²ˆ ì •ë³´ë¥¼ ì˜ëª» ì…ë ¥í•˜ì…¨ìŠµë‹ˆë‹¤.");
	session.setAttribute("alertMessage", null);*/
%>

<!-- whologin ë³€ìˆ˜ëŠ” í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì•Œë ¤ ì£¼ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. -->
<!-- ë¯¸ë¡œê·¸ì¸(0) ì¼ë°˜ ì‚¬ìš©ì(1) ê´€ë¦¬ì(2) -->
<c:set var="whologin" value="0"/>
<c:if test="${not empty sessionScope.loginfo}">
	<c:if test="${sessionScope.loginfo.id == 'admin'}">
		<c:set var="whologin" value="2"/>
	</c:if>
	<c:if test="${sessionScope.loginfo.id != 'admin'}">
		<c:set var="whologin" value="1"/>
	</c:if>
</c:if>
whologin : ${whologin}

 
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<!-- ì´ íŒŒì¼ì€ ëª¨ë“  ë¬¸ì„œì—ì„œ ê³µìš©ìœ¼ë¡œ ì°¸ì¡°í•  íŒŒì¼ì…ë‹ˆë‹¤.  -->
	<!-- ìë°” ê´€ë ¨ ë³€ìˆ˜ ë° íŒ¨í‚¤ì§€ ì„í¬íŠ¸, ë„¤ë¹„ê²Œì´ì…˜ ë°”, jstl ë“±ë“± -->
	<!-- for sweet alert -->
	<script src="${pageContext.request.contextPath}/js/sweetalert.js"></script>
	<style>
		.alert-dismissible{margin: 10px;}
	</style>
</head>
<body>
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">ì‡¼í•‘ëª°</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item">
						<c:if test="${whologin eq 0}">
							<a class="nav-link" href="#">ë¯¸ë¡œê·¸ì¸</a>
						</c:if>
						<c:if test="${whologin ne 0}">
							<a class="nav-link" href="#">${sessionScope.loginfo.name}ë‹˜</a>
						</c:if>
					</li>
					
					<!-- member section -->
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button"
							data-bs-toggle="dropdown">íšŒì›</a>
						<ul class="dropdown-menu">
							<c:if test="${whologin eq 0}"><!-- href ë„ì–´ì“°ê¸° x -->
								<li><a class="dropdown-item" href="<%=notWithFormTag%>meInsert">íšŒì› ê°€ì…</a></li>
								<li><a class="dropdown-item" href="<%=notWithFormTag%>meLogin">ë¡œê·¸ì¸</a></li>
							</c:if>		
							<c:if test="${whologin ne 0}">				
								<li><a class="dropdown-item" href="#">ì •ë³´ ìˆ˜ì •</a></li>
								<li><a class="dropdown-item" href="<%=notWithFormTag%>meLogout">ë¡œê·¸ì•„ì›ƒ</a></li>
								<li><a class="dropdown-item" href="<%=notWithFormTag%>meDetail">ìƒì„¸ë³´ê¸°</a></li>								
								<li><a class="dropdown-item" href="#">íƒˆí‡´í•˜ê¸°</a></li>
							</c:if>
							<c:if test="${whologin eq 2}">
								<li><a class="dropdown-item" href="<%=notWithFormTag%>meList">ëª©ë¡ ë³´ê¸°</a></li>
							</c:if>
						</ul>
					</li>
					
					<!-- board section -->
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button"
							data-bs-toggle="dropdown">ê²Œì‹œë¬¼</a>
						<ul class="dropdown-menu">
							<c:if test="${whologin ne 0}">
								<li><a class="dropdown-item" href="<%=notWithFormTag%>boInsert">ê²Œì‹œë¬¼ ë“±ë¡</a></li>
							</c:if>
							<li><a class="dropdown-item" href="<%=notWithFormTag%>boList">ëª©ë¡ ë³´ê¸°</a></li>
						</ul>
					</li>					
					<!-- product section -->
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button"
							data-bs-toggle="dropdown">ìƒí’ˆ</a>
						<ul class="dropdown-menu">
							<c:if test="${whologin eq 2}">
								<li><a class="dropdown-item" href="<%=notWithFormTag%>prInsert">ìƒí’ˆ ë“±ë¡</a></li>
							</c:if>
							<li><a class="dropdown-item" href="<%=notWithFormTag%>prList">ëª©ë¡ ë³´ê¸°</a></li>
						</ul>
					</li>					
					
				</ul>
			</div>
		</div>
	</nav>
	
	<c:if test="${not empty sessionScope.alertMessage}">
		<%-- ì‚¬ìš©ìì—ê²Œ ì£¼ì˜/ê²½ê³ /ì˜¤ë¥˜ ë“±ì„ ì•Œë ¤ ì£¼ê¸° ìœ„í•œ Alert Box --%>
		<div class="alert alert-danger alert-dismissible">
	    	<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
	    	<strong>ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’ğŸ˜‚ğŸ˜’</strong> ${sessionScope.alertMessage}
	  	</div>
	</c:if>
	<%-- ë³´ì—¬ì¤€ Alert Boxë¥¼ session ì˜ì—­ì—ì„œ ì œê±°í•©ë‹ˆë‹¤. --%>
	<c:remove var="alertMessage" scope="session"/> 
</body>
</html>

